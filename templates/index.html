<html>

<head>

  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">

  <link rel="stylesheet" type="text/css" href="../static/style.css">

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>



<!--

function pprint() {

console.log("Hello world!!");

}



function onUserInput(string) {

console.log("Hello world!!!".string);

}







document.addEventListener("DOMContentLoaded", function() {

  pprint("Tester2");

});





    socket.on('my response', function(msg) {

        $('#log').append('<p>Received: ' + msg.data + '</p>');

        console.log("Message from server is ".msg.data);

    });



   $('form#emit').submit(function(event) {

        socket.emit('my event', {data: $('#emit_data').val()});

        return false;

    });



function setIOSocket(){

    console.log("Io socket created to Flask server");



    // start up the SocketIO connection to the server - the namespace 'test' is also included here if necessary

    var socket = io.connect('http://' + document.domain + ':' + location.port + '/test');

    // this is a callback that triggers when the "my response" event is emitted by the server.

    console.log("Io socket created to Flask server");

}

-->



<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>

<script type="text/javascript" charset="utf-8">

	function openForm() {

	  document.getElementById("myForm").style.display = "block";

	  clearConvo();

	}



	function closeForm() {

	  document.getElementById("myForm").style.display = "none";

	}



	function clearConvo(){

		paragraph.textContent = "";

	}



	function humanSpeaks(){

	var message = document.getElementById("userInput").value;

	paragraph.textContent += "You said: " + message + '\n';

	socket.emit('pplTalk',message);

	document.getElementById("p").scrollTop = document.getElementById("p").scrollHeight;

	document.getElementById("userInput").value = "";

	}

	

	function botSpeaks(message){

		paragraph.textContent += "Bot said: " + message + '\n';

		document.getElementById("p").scrollTop = document.getElementById("p").scrollHeight;

		if(speech == true){

			window.speechSynthesis.speak(new SpeechSynthesisUtterance(message));

		}

		document.getElementById("userInput").value = "";

	}

	

	function speechToText(){

		window.SpeechRecognition = window.webkitSpeechRecognition || window.SpeechRecognition;

		const recognition = new SpeechRecognition();

		recognition.start();

		recognition.onresult = (event) => {

			const speechToText = event.results[0][0].transcript;

			document.getElementById("userInput").value = speechToText;

            humanSpeaks();

		}

	}



























</script>















</head>

<body onload="setSocket()">

	<nav class="navbar navbar-inverse">

	  <div class="container-fluid">

		<div class="navbar-header">

		  <a class="navbar-brand" href="#">AI chatbot</a>

		</div>

		<ul class="nav navbar-nav">

		  <li class="active"><a href="#">Home</a></li>

		  <li><a href="#arch">Architecture</a></li>

		  <li><a href="#service">Service</a></li>

		  <li><a href="#contact">Contact Us</a></li>

		</ul>

	  </div>

	</nav>

	<div class="container">

  <header>

	  <div class="page-header">

		<div class="headerHeight">

		  <h1>AI Chatbot system</h1>

		  <p>Try out are chatbot system in the bottom left hand corner.</p>

		  <br>

		  <h2>Instructions:</h2>

		  <br>

		  <p>Press the "Can we help?" button to start the ChatBot!</p>

		  <p>Press send to send a message after typing something in the input box.</p>

		  <p>Press the <i class="fas fa-volume-up"></i> button to toggle the AI voice.</p>

		  <p>Press <i class="fas fa-microphone"></i> button to talk to the bot with a microphone.</p>

		</div>

	  </div>

  </header>

  <section id = "arch">

	<div class="row">

	<div class="col-sm-12" class="headerHeight">

	  <h1>Architecture</h1>

	  <hr id="midHr">

	</div>

	</div>

	<div class="row">

	  <div class="col-sm-6">

		<h2>Graphical User Interface</h2>

		<p>The AI chatpot has a graphical user interface that comes in the form of a chatbox that the user can interact with. The user is also able to use audio communication to speak to the chatbot and the chatbot will be able to speak back. </p>

	  </div>

		

	  <div class="col-sm-6">

		<h2>NLPU</h2>

		<p>The NLPU component is to process the questions asked in text and understand what theyreally mean.</p>

		<p>Audio communication</p>

	  </div>

	</div>

	<div class="row">

	  <div class="col-sm-6">

		<h2>Knowledge-Base</h2>

		<p>The KB stores the domain knowledge and expertise, represented by Questions and Answers(QnA), rules and/or other ways, which can be retrieved by the RE to help answering questionsin a conversation.</p>

		<p>Audio communication</p>

	  </div>

	  <div class="col-sm-6">

		<h2>Reasoning Engine</h2>

		<p>The RE will be needed when you cannot find the direct answers to the asked questions. </p>

		<p>If your RE cannot find or infer a good or reasonable answer for a question, your chatbot has tosay something, e.g. ”Sorry, I have no answer.”</p>

	  </div>

	</div>

	<div class="row">

	  <div class="col-sm-6">

		<h2>Prediction Model</h2>

		<p>Chat box</p>

		<p>Audio communication</p>

	  </div>

	  <div class="col-sm-6">

		<h2>Knowledge Acuisition</h2>

		<p>Chat box</p>

		<p>Audio communication</p>

	  </div>

	</div>

  </section>

  <section id ="service">

	<div class="row">

	<div class="col-sm-12" class="headerHeight">

	  <h1>What services can I offer?</h1>

	  <hr id="midHr">

	</div>

	</div>

	<div class="row">

	  <div class="col-sm-6">

		<h2>Cheapest tickets</h2>

		<p>Chat box</p>

		<p>Audio communication</p>

	  </div>

	  <div class="col-sm-6">

		<h2>Customer service</h2>

		<p>Chat box</p>

		<p>Audio communication</p>

	  </div>

	</div>

	<div class="row">

	  <div class="col-sm-6">

		<h2>Dealing with contingencies</h2>

		<p>Chat box</p>

		<p>Audio communication</p>

	  </div>

	  <div class="col-sm-6">

		<h2>Faster and better experience</h2>

		<p>Chat box</p>

		<p>Audio communication</p>

	  </div>

	</div>

  </section>

  <div>

  

	  

  <button class="open-button" onclick="openForm()">Can we help?</button>



  <div class="chat-popup" id="myForm">

    <div class="form-container">

	<b id="botName">ChatBot</b>

	<button  type="button" id="buttonClose" class= "btn btn-danger" onclick="closeForm()" class="buttonWidth"><i class="fa fa-window-close"></i></button><br>

      <div class = "chatArea">

		<textarea id="p" readonly>

			

		</textarea>

      </div>

      <input type="text" name="clientInput" id="userInput" placeholder="Ask us a question">

      <button type="button" class="btn" id="mic" onclick="speechToText()"><i class="fas fa-microphone"></i></button><br>

<!--

      <button type="button" class="btn" id="mic" onclick="alert('Listening...')"><i class="fas fa-microphone"></i></button><br>



-->

      <button  type="button" id = "send" name="postMessageFromClient" onclick="humanSpeaks()" class="btn btn-success" class="buttonWidth">Send</button>

	  <button  type="button" id = "botSend" name="postMessageFromClient" onclick="botSpeaks()" class="btn btn-primary" class="buttonWidth">Bot Send</button>

	  <button  type="button" class="btn btn-warning" onclick="clearConvo()" class="buttonWidth">Clear</button>

	  <button  type="button" id = "toggle" class= "btn btn-danger" onclick="speechToggle()" class="buttonWidth"><i class="fas fa-volume-up"></i></button>

    </div>

  </div>

  </div>

  <footer class="footer">



	  

	  <div class="footer-copyright text-center py-3">

		

		<p> © 2018 Copyright: AI chatbot</a>

	  </div>

	  



	</footer>

  <script>

  

    var paragraph = document.getElementById("p");

	var speech = false;

	function speechToggle(){

		if(speech == true){

			speech = false;

			document.getElementById('toggle').style.background = '#d9534f'

		}else{

			speech = true;

			document.getElementById('toggle').style.background = '#5cb85c'

		}

	}





	

	var input = document.getElementById("userInput");

	

	input.addEventListener("keyup", function(event) {

	event.preventDefault();

	if (event.keyCode === 13) {

		document.getElementById("send").click();

		console.log('after condition');

	}

	});



    var socket = io.connect('http://' + document.domain + ':' + location.port);

    console.log('http://' + document.domain + ':' + location.port);



    socket.on('connect', function() {

        socket.emit('Info', {data: 'I\'m connected! and print on the server\n'});

    });



    socket.on('botTalk', function onServerSentEvent (msg) {

      // msg => {...whatever the server broadcasted...}

	  botSpeaks(msg);

    console.log(msg)

    });







	

	

	

	

	

	

	

	

  </script>







</body>

</html>
